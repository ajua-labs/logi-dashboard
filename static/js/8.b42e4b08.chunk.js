(window.webpackJsonp=window.webpackJsonp||[]).push([[8,3,16],{143:function(e,t,a){"use strict";a.r(t),a.d(t,"LogiDataRow",function(){return p});var n=a(29),r=a(14),c=a(0),o=a.n(c),l=a(285),i=a(286),u=a(52),s=a(136),d=a(282),m=a(145),f=Object(u.a)(function(e){return Object(s.a)({rowStyle:{"&:nth-of-type(odd)":{backgroundColor:e.palette.background.default}}})});function p(e){var t=f(),a=e.columns,u=e.index,s="enhanced-table-checkbox-".concat(u),p=Object(c.useState)(!1),g=Object(r.a)(p,2),h=g[0],E=g[1],b=Object(c.useState)(!1),w=Object(r.a)(b,2),v=w[0],S=w[1],C=Object(c.useState)(),O=Object(r.a)(C,2),y=O[0],j=O[1],k=Object(c.useState)(e.row),D=Object(r.a)(k,2),R=D[0],T=D[1];function M(t,a){var r=Object(n.a)({},R);r[a]=t,T(r),e.setEditedRow&&e.setEditedRow(r)}Object(c.useEffect)(function(){T(e.row)},[e.row]);var x={enterEditMode:function(){E(!0)},discardEditMode:function(){E(!1),T(e.row),e.setEditedRow&&e.setEditedRow(e.row)},editMode:h||!!e.insertMode&&e.insertMode,oldData:e.row,newData:R,setData:function(e){T(e)},insertMode:!!e.insertMode&&e.insertMode,isExpanded:v,expand:function(e){j(e),S(!0)},collapse:function(){S(!1)}};return o.a.createElement(o.a.Fragment,null,o.a.createElement(l.a,{className:t.rowStyle},e.allowSelection?o.a.createElement(i.a,{padding:"checkbox"},o.a.createElement(d.a,{checked:!1,inputProps:{"aria-labelledby":s}})):null,a.filter(function(e){return!e.hidden}).map(function(t,a){return 0===a?o.a.createElement(i.a,{key:"".concat(t.accessor?t.accessor:t.header).concat(u),component:"th",id:s,scope:"row",padding:"default"},e.insertMode&&"ActionColumn"===t.dataType?null:t.viewComponent?t.viewComponent(R,x):o.a.createElement(m.default,{column:t,changeValue:function(e){return M(e,t.accessor)},dataRow:R,editMode:h||e.insertMode})):o.a.createElement(i.a,{key:"".concat(t.accessor?t.accessor:t.header).concat(u)},e.insertMode&&"ActionColumn"===t.dataType?null:t.viewComponent?t.viewComponent(R,x):o.a.createElement(m.default,{column:t,changeValue:function(e){return M(e,t.accessor)},dataRow:R,editMode:h||!!e.insertMode&&e.insertMode}))})),v?o.a.createElement(l.a,null,o.a.createElement(i.a,{colSpan:a.filter(function(e){return!e.hidden}).length},y)):null)}},144:function(e,t,a){"use strict";a.r(t),a.d(t,"LogiTableToolbar",function(){return h}),a.d(t,"LogiStandardToolbar",function(){return E});var n=a(0),r=a.n(n),c=a(52),o=a(136),l=a(204),i=a(53),u=a(265),s=a.n(u),d=a(257),m=a.n(d),f=a(258),p=a.n(f),g=Object(c.a)(function(e){return Object(o.a)({root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},spacer:{flex:"1 1 100%"},actions:{color:e.palette.text.secondary,flex:"0 0 auto"},title:{flex:"0 0 auto"}})}),h=function(e){var t=g();return r.a.createElement(l.a,{className:t.root},r.a.createElement("div",{className:t.title},e.title),r.a.createElement("div",{className:t.spacer}),r.a.createElement("div",{className:t.actions},e.actions))},E=function(e){var t=r.a.createElement(r.a.Fragment,null);return void 0!==e.insertNewRecord&&(t=e.actionsAndStates.insertMode?r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,{onClick:function(){e.insertNewRecord(e.actionsAndStates.insertedRecordData())},title:"Save changes"},r.a.createElement(m.a,null)),r.a.createElement(i.a,{color:"secondary",onClick:e.actionsAndStates.discardInsertMode,title:"Cancel changes"},r.a.createElement(p.a,null))):r.a.createElement(i.a,{color:"secondary",onClick:e.actionsAndStates.enterInsertMode,title:"Add Record"},r.a.createElement(s.a,null))),r.a.createElement(h,{title:e.title,actions:t})}},145:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(141),o=a(260),l=a(261),i=a(282),u=a(263),s=a.n(u),d=a(264),m=a.n(d);t.default=function(e){if(e.editMode&&!e.column.readOnly){var t=function(t){return e.changeValue(t.toISOString())};switch(e.column.dataType){case"Date":return r.a.createElement(l.c,{utils:o.a},r.a.createElement(l.a,{autoOk:!0,value:e.dataRow[e.column.accessor],onChange:t,rightArrowIcon:r.a.createElement(s.a,null),leftArrowIcon:r.a.createElement(m.a,null)}));case"Time":return r.a.createElement(l.c,{utils:o.a},r.a.createElement(l.d,{value:e.dataRow[e.column.accessor],onChange:t}));case"DateTime":return r.a.createElement(l.c,{utils:o.a},r.a.createElement(l.b,{value:e.dataRow[e.column.accessor],onChange:t,rightArrowIcon:r.a.createElement(s.a,null),leftArrowIcon:r.a.createElement(m.a,null)}));case"Boolean":return r.a.createElement(i.a,{onChange:function(t){e.changeValue(t.target.checked)},checked:a()});case"Number":case"String":default:return r.a.createElement(c.a,{type:"Number"===e.column.dataType?"number":"text",value:e.dataRow[e.column.accessor],onChange:function(t){return e.changeValue(t.target.value)}})}}else switch(e.column.dataType){case"Date":return r.a.createElement(r.a.Fragment,null,new Date(e.dataRow[e.column.accessor]).toLocaleDateString());case"DateTime":return r.a.createElement(r.a.Fragment,null,new Date(e.dataRow[e.column.accessor]).toLocaleString());case"Time":return r.a.createElement(r.a.Fragment,null,new Date(e.dataRow[e.column.accessor]).toLocaleTimeString());case"Boolean":return r.a.createElement(i.a,{checked:a()});default:return r.a.createElement(r.a.Fragment,null,e.dataRow[e.column.accessor])}function a(){switch(typeof e.dataRow[e.column.accessor]){case"boolean":return e.dataRow[e.column.accessor];case"number":return e.dataRow[e.column.accessor]>0;case"string":return"true"===e.dataRow[e.column.accessor].toLowerCase();default:return e.dataRow[e.column.accessor]}}}},146:function(e,t,a){"use strict";a.r(t),a.d(t,"LogiTableHeader",function(){return d});var n=a(14),r=a(0),c=a.n(r),o=a(286),l=a(293),i=a(285),u=a(319),s=a(282);function d(e){var t=e.onSelectAllClick,a=e.columns,r=c.a.useState("asc"),d=Object(n.a)(r,2),m=d[0],f=d[1],p=c.a.useState(""),g=Object(n.a)(p,2),h=g[0],E=g[1];return c.a.createElement(l.a,null,c.a.createElement(i.a,null,e.allowSelection?c.a.createElement(o.a,{padding:"checkbox"},e.showSelectAll?c.a.createElement(s.a,{checked:!0,onChange:t,inputProps:{"aria-label":"Select all"}}):null):null,a.map(function(t){return t.hidden?null:c.a.createElement(o.a,{key:t.accessor,sortDirection:h===t.header&&m},e.allowSort&&"ActionColumn"!==t.dataType?c.a.createElement(u.a,{active:h===t.header,direction:m,onClick:(a=t,function(t){if(e.customSortFunction)e.customSortFunction(t,a);else{var n=h===a.header&&"desc"===m;f(n?"asc":"desc"),E(a.header)}})},t.header):t.header);var a})))}},147:function(e,t,a){"use strict";a.r(t),a.d(t,"StandardActions",function(){return C}),a.d(t,"EditComp",function(){return O}),a.d(t,"DeleteComp",function(){return y}),a.d(t,"ExpandDetail",function(){return j});var n=a(0),r=a.n(n),c=a(267),o=a.n(c),l=a(266),i=a.n(l),u=a(257),s=a.n(u),d=a(258),m=a.n(d),f=a(53),p=(a(88),a(52)),g=a(136),h=a(202),E=a(103),b=a.n(E),w=a(102),v=a.n(w),S=Object(p.a)(function(e){return Object(g.a)({progress:{marginLeft:e.spacing(2),marginRight:e.spacing(2)}})});function C(e){var t=S();return e.actionInProgress?r.a.createElement(h.a,{size:30,className:t.progress}):e.editMode?r.a.createElement(O,e):r.a.createElement(r.a.Fragment,null,void 0!==e.expandComp?r.a.createElement(j,e):null,void 0!==e.saveChanges?r.a.createElement(O,e):null,void 0!==e.deleteRecord?r.a.createElement(y,e):null)}function O(e){return e.editMode?r.a.createElement(r.a.Fragment,null,r.a.createElement(R,{onClick:function(t){e.saveChanges&&e.saveChanges()}}),r.a.createElement(T,{onClick:function(){e.discardEditMode()}})):r.a.createElement(k,{onClick:function(){e.enterEditMode()}})}function y(e){return r.a.createElement(D,{onClick:function(){return e.deleteRecord&&e.deleteRecord()}})}function j(e){return e.isExpanded?r.a.createElement(f.a,{onClick:function(){e.collapse&&e.collapse()}},r.a.createElement(v.a,null)):r.a.createElement(f.a,{onClick:function(){e.expandComp&&e.expand(e.expandComp)}},r.a.createElement(b.a,null))}var k=function(e){return r.a.createElement(f.a,{onClick:e.onClick,title:"Edit row"},r.a.createElement(i.a,null))},D=function(e){return r.a.createElement(f.a,{onClick:e.onClick,title:"Delete row"},r.a.createElement(o.a,null))},R=function(e){return r.a.createElement(f.a,{onClick:e.onClick,title:"Save changes"},r.a.createElement(s.a,null))},T=function(e){return r.a.createElement(f.a,{color:"secondary",onClick:e.onClick,title:"Cancel changes"},r.a.createElement(m.a,null))}},162:function(e,t,a){"use strict";a.r(t);var n=a(35),r=a.n(n),c=a(58),o=a(14),l=a(0),i=a.n(l),u=a(30),s=a(90),d=a(147),m=a(60);t.default=function(e){console.log(e);var t=Object(l.useState)(),a=Object(o.a)(t,2),n=a[0],f=a[1],p=Object(l.useState)(!1),g=Object(o.a)(p,2),h=g[0],E=g[1],b=Object(l.useState)(0),w=Object(o.a)(b,2),v=w[0],S=w[1],C=Object(u.useAuth)();function O(e){return y.apply(this,arguments)}function y(){return(y=Object(c.a)(r.a.mark(function e(t){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a="".concat("https://logi-dash-api.azurewebsites.net/","security/widgets"),e.next=4,C.AuthenticatedServerCall(a,"POST",{Insert:' ("Name", "Component", "Properties", "Description", "IsPublic")\n          SELECT \''.concat(t.Name.trim(),"' ,\n        '").concat(t.Component?t.Component:null,"' ,\n        '").concat(t.Properties?t.Properties:null,"' ,\n        '").concat(t.Description.trim(),"', \n        ").concat(void 0!==t.IsPublic?m.Value2SQLValue.get("Boolean")(t.IsPublic):0,"        \n      ")});case 4:return e.abrupt("return",!0);case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 11:case"end":return e.stop()}},e,null,[[0,7]])}))).apply(this,arguments)}function j(e){return k.apply(this,arguments)}function k(){return(k=Object(c.a)(r.a.mark(function e(t){var a,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a="".concat("https://logi-dash-api.azurewebsites.net/","security/widgets"),e.next=4,C.AuthenticatedServerCall(a,"DELETE",{WidgetID:t});case 4:return n=e.sent,console.log(n),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 13:case"end":return e.stop()}},e,null,[[0,9]])}))).apply(this,arguments)}Object(l.useEffect)(function(){function e(){return(e=Object(c.a)(r.a.mark(function e(){var t,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),t="".concat("https://logi-dash-api.azurewebsites.net/","security/widgets"),e.next=4,C.AuthenticatedServerCall(t,"GET");case 4:a=e.sent,f(a),E(!1);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[C,v]);var D=[{header:"Actions",accessor:"ActionColumnOne",dataType:"ActionColumn",viewComponent:function(e,t){return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.StandardActions,Object.assign({},t,{deleteRecord:Object(c.a)(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Are you sure you want to delete ".concat(e.Name," ?"))){t.next=6;break}return E(!0),t.next=4,j(e.WidgetID);case 4:S(function(e){return e+1}),E(!1);case 6:case"end":return t.stop()}},t)})),saveChanges:function(){var e="";for(var a in t.newData)t.newData[a]!==t.oldData[a]&&("boolean"===typeof t.newData[a]&&(t.newData[a]=m.Value2SQLValue.get("Boolean")(t.newData.IsPublic)),e+="".concat(a," = '").concat(t.newData[a],"' ,"));return e.length>0?(e=e.substring(0,e.length-1),C.AuthenticatedServerCall("".concat("https://logi-dash-api.azurewebsites.net/","security/widgets"),"PUT",{WidgetID:t.oldData.WidgetID,Update:e}).then(function(e){console.log(e),S(function(e){return e+1})}).catch(function(e){console.log(e),t.discardEditMode(),S(function(e){return e+1})})):Promise.resolve(!0)}})))}},{header:"WidgetID",accessor:"WidgetID",dataType:"Number",readOnly:!0},{header:"Name",accessor:"Name",dataType:"String"},{header:"Component",accessor:"Component",dataType:"String"},{header:"Properties",accessor:"Properties",dataType:"String"},{header:"Is Public",accessor:"IsPublic",dataType:"Boolean"},{header:"Description",accessor:"Description",dataType:"String"}];return i.a.createElement(i.a.Fragment,null,i.a.createElement(s.LogiTable,{isRemoteLoading:h,dense:!0,allowSort:!1,columns:D,keyAccessor:"WidgetID",data:n,tableToolbar:function(e){return i.a.createElement(s.LogiStandardToolbar,{actionsAndStates:e,title:"Widgets",insertNewRecord:function(){var t=Object(c.a)(r.a.mark(function t(a){var n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.insertedRecordData(),t.prev=1,n&&n.Name&&!(n.Name.trim().length<=0)){t.next=5;break}return alert("Please fill all required fields and try again"),t.abrupt("return");case 5:return E(!0),t.next=8,O(n);case 8:S(v||1),e.discardInsertMode(),E(!1),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(1),console.log(t.t0),alert("something went wrong, trying to save the data");case 17:case"end":return t.stop()}},t,null,[[1,13]])}));return function(e){return t.apply(this,arguments)}}()})}}))}},266:function(e,t,a){"use strict";var n=a(21);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),c=(0,n(a(25)).default)(r.default.createElement("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");t.default=c},267:function(e,t,a){"use strict";var n=a(21);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),c=(0,n(a(25)).default)(r.default.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.default=c},90:function(e,t,a){"use strict";a.r(t),a.d(t,"LogiTable",function(){return S});var n=a(14),r=a(0),c=a.n(r),o=a(52),l=a(136),i=a(329),u=a(330),s=a(286),d=a(332),m=a(285),f=a(63),p=a(146),g=a(143),h=a(261),E=a(260),b=a(202);a.d(t,"LogiDataRow",function(){return g.LogiDataRow});var w=a(144);a.d(t,"LogiTableToolbar",function(){return w.LogiTableToolbar}),a.d(t,"LogiStandardToolbar",function(){return w.LogiStandardToolbar});var v=Object(o.a)(function(e){return Object(l.a)({root:{width:"100%",marginTop:e.spacing(3)},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},tableWrapper:{overflowX:"auto"},progress:{marginLeft:e.spacing(2),marginRight:e.spacing(2)}})});function S(e){var t=v(),a=Object(r.useState)(0),o=Object(n.a)(a,2),l=o[0],w=o[1],S=Object(r.useState)(5),C=Object(n.a)(S,2),O=C[0],y=C[1],j=Object(r.useState)(!1),k=Object(n.a)(j,2),D=k[0],R=k[1],T=Object(r.useState)([{}]),M=Object(n.a)(T,2),x=M[0],L=M[1],P=Object(r.useState)(!1),A=Object(n.a)(P,2),I=A[0],N=A[1],F=Object(r.useState)(!1),V=Object(n.a)(F,2),z=V[0],W=V[1],B=void 0;Object(r.useEffect)(function(){if(console.log("setting data"),"function"===typeof e.data){var t=e.data;R(!0),t().then(function(e){L(e),R(!1)}).catch(function(e){console.log("error: "+e),R(!1),N(!0)})}else L(e.data)},[e.data,e.refreshData]);var H=O-(x?Math.min(O,x.length-l*O):0);return c.a.createElement(h.c,{utils:E.a},c.a.createElement("div",{className:t.root},c.a.createElement(f.a,{className:t.paper},c.a.createElement("div",{className:t.tableWrapper},e.tableToolbar?e.tableToolbar({enterInsertMode:function(){W(!0)},discardInsertMode:function(){W(!1)},insertMode:z,insertedRecordData:function(){return B}}):null,c.a.createElement(i.a,{className:t.table,"aria-labelledby":"tableTitle",size:e.dense?"small":"medium"},c.a.createElement(p.LogiTableHeader,e),c.a.createElement(u.a,null,z&&c.a.createElement(g.LogiDataRow,{key:-1,row:function(){var t={};return e.columns.filter(function(e){return"ActionColumn"!==e.dataType}).forEach(function(e){t[e.accessor]=""}),t},index:-1,columns:e.columns,allowSelection:!1,insertMode:!0,setEditedRow:function(e){B=e}}),e.isRemoteLoading||D||I?c.a.createElement(m.a,null,c.a.createElement(s.a,{colSpan:e.columns.filter(function(e){return!e.hidden}).length,rowSpan:O,align:"center"},c.a.createElement("div",null,e.isRemoteLoading||D?c.a.createElement(b.a,{size:30,className:t.progress}):"Failed to load data!"))):x&&x.length>0&&x.slice(l*O,l*O+O).map(function(t,a){return c.a.createElement(g.LogiDataRow,{key:a,row:t,index:a,columns:e.columns,allowSelection:e.allowSelection})}),H>0&&c.a.createElement(m.a,{style:{height:49*H}},c.a.createElement(s.a,{colSpan:e.columns.filter(function(e){return!e.hidden}).length}))))),c.a.createElement(d.a,{rowsPerPageOptions:[5,10,25],component:"div",count:x?x.length:0,rowsPerPage:O,page:l,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:function(e,t){w(t)},onChangeRowsPerPage:function(e){y(+e.target.value)}}))))}}}]);
//# sourceMappingURL=8.b42e4b08.chunk.js.map